<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>피드 작성 - MaxFeed</title>
  <link href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css" rel="stylesheet">
</head>
<body>

<h2>새 피드 작성</h2>
<textarea id="content" placeholder="내용을 입력하세요"></textarea><br>
<input type="file" id="file">
<button onclick="addFeed()">업로드</button>
<button onclick="location.href='index.html'">이전</button>

<script>
const api = 'https://supermax.kr/feed';

async function addFeed() {
  const formData = new FormData();
  formData.append('content', document.getElementById('content').value);
  formData.append('file', document.getElementById('file').files[0]);

  const res = await fetch(`${api}/add-feed`, {
    method: 'POST',
    headers: { 'Authorization': 'Bearer ' + localStorage.getItem('token') },
    body: formData
  });

  if (res.ok) {
    alert('업로드 완료');
    location.href = 'index.html';
  } else alert('업로드 실패');
}
</script>

</body>
</html>
